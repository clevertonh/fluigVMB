<html>
<head>
    <meta charset="utf-8">
    <link type="text/css" rel="stylesheet" href="/portal/resources/style-guide/css/fluig-style-guide.min.css" />
    <script type="text/javascript" src="/portal/resources/js/jquery/jquery.js"></script>
    <script type="text/javascript" src="/portal/resources/js/jquery/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/portal/resources/js/mustache/mustache-min.js"></script>
    <script type="text/javascript" src="/webdesk/vcXMLRPC.js"></script>
    <script type="text/javascript" src="/portal/resources/style-guide/js/fluig-style-guide.min.js" charset="utf-8"></script>
    <link type="text/css" rel="stylesheet" href="SolicitacaoCompraProdutos.css" />
</head>

<body>
    <div class="container">
        <div class="fluig-style-guide">
            <!--  Imagem  -->
            <div class="panel panel-default">
                <div class="panel-body">
                    <div class="col-xs-6 col-md-3">
                        <img src="https://visaomundial.org/images/logo_VMB.svg">
                    </div>
                </div>
            </div>
            <!--  Formulario  -->
            <form role="form">
                <div class='panel panel-primary'>
                    <div class="panel-heading">
                        <div class="container text-center">
                            <h4>Solicitação de Compras</h4>
                            <!--                         <div class="paragraph-is-required system-message-information alert alert-info" role="alert">Todos os campos com * sÃ£o de preenchimento obrigatÃ³rio.</div>
                           -->
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="row">
                            <div class="col-md-12">
                                <div id="exTab3" class="container-fluid">
                                    <ul class="nav nav-pills nav-justified">
                                        <li class="active"><a href="#1b" data-toggle="tab">Solicitante</a></li>
                                        <li><a href="#2b" data-toggle="tab">Gestor</a></li>

                                    </ul>
                                    <div class="tab-content clearfix">
                                        <div class="tab-pane active" id="1b">
                                            <div class="row">
                                                <section>
                                                    <div class="wizard">
                                                        <div class="wizard-inner">
                                                            <div class="connecting-line"></div>
                                                            <ul class="nav nav-tabs" role="tablist">
                                                                <li role="presentation" class="active">
                                                                    <a href="#step1" data-toggle="tab" aria-controls="step1" role="tab" title="Dados financeiro"> <span class="round-tab">
                                                      <i class="fluigicon fluigicon-money"></i>
                                                      </span>
                                                                    </a>
                                                                </li>
                                                                <li role="presentation" class="disabled">
                                                                    <a href="#step2" data-toggle="tab" aria-controls="step2" role="tab" title="Dados da compra"> <span class="round-tab"> <i
                                                      class="fluigicon fluigicon-shopping-cart"></i>
                                                      </span>
                                                                    </a>
                                                                </li>
                                                            </ul>
                                                        </div>
                                                        <div class="tab-content">
                                                            <div class="tab-pane active" role="tabpanel" id="step1">
                                                                <div class="row">
                                                                    <div class="form-group col-md-2">
                                                                        <label for="id" class="required">Cód. solicitação
                                                                        </label>
                                                                        <input type="text" class="form-control" id="solicitacao" name='solicitacao' readonly>
                                                                    </div>
                                                                </div>
                                                                <!-- Primeira Linha -->
                                                                <div class="row">
                                                                    <div class="form-group col-md-5">
                                                                        <label for="solicitante" class="required">Solicitante</label>
                                                                        <input type="text" class="form-control" id="solicitante" name="solicitante" readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-4">
                                                                        <label for="exampleInputEmail1">Email</label>
                                                                        <input type="email" class="form-control" id="emailSolicitante" name="emailSolicitante" readonly>
                                                                    </div>
                                                                    <div class="form-group col-md-3">
                                                                        <label for="dataSolicitacao">Data da solicitação</label>
                                                                        <div class="input-group date">
                                                                            <input type="text" class="form-control" id="dataSolicitacao" name="dataSolicitacao" readonly>
                                                                            <span class="input-group-addon"> <span
                                                               				class="fluigicon fluigicon-calendar"></span>
                                                                            </span>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group col-md-1">
                                                                        <input type="text" id="matriculasolicitante" name="matriculasolicitante" readonly>
                                                                    </div>
                                                                </div>
                                                              
                                                         
                                                                
                                                             
                                                                <!-- Segunda Linha -->
                                                                <div class="row">
                                                                    <div class="form-group col-md-6">
                                                                        <div class="form-group">
                                                                            <label for="finalidade">Finalidade</label>
                                                                            <textarea class="form-control" rows="3" id="finalidade" name="finalidade"></textarea>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- Linha 4 -->
                                                                <!-- Linha 5  ( Tabela )-->
                                                                <div class="panel panel-info" id="panelItens">
                                                                    <div class="panel-heading ">
                                                                        <h3 class="panel-title">
                                                            <b>Informa&ccedil;&otilde;es do Pagamento</b>
                                                         </h3>
                                                                    </div>
                                                                    <div class="panel-body">
                                                                                           <div class="form-group row" id="divEventos">
                                                      <div class="form-group col-md-8" id="selecaodeevento">
                                                         <label>Vincule essa solicitação a um Evento Visão Mundial</label> <input
                                                            name="dataset_solicitacaoevento" class="form-control"
                                                            type="zoom" id="dataset_solicitacaoevento"
                                                            data-zoom="{
                                                            'displayKey':'SOLICITACAO',
                                                            'datasetId':'VM_SolicitacoesEventos',
                                                            'maximumSelectionLength':'1',
                                                            'placeholder':'Selecione um evento',
                                                            'fields':[
                                                            {'field':'SOLICITACAO','label':'SOLICITACAO'},                                                            
                                                            {'field':'SOLICITANTE','label':'SOLICITANTE','standard':'true'},
                                                            {'field':'TXNOMEEVENTO','label':'TXNOMEEVENTO'},
                                                            {'field':'FINANEVENTO','label':'FINANEVENTO'}                                                           						  					
                                                            ]
                                                            }">
                                                      </div>                                                                                                          
                                                   
                                                   <div class="form-group col-md-4">
                                                         			<label>Carregar informações financeiras do evento</label><br> <label
			                                                            for="carregaFinan">Sim</label> <input
			                                                            type="radio" id="carregaFinan" name="FinanEvento"
			                                                            value="sim" onclick="clickFinanceiroEvento()">
			                                                         <label for="NcarregaFinan">Não</label> <input
			                                                            type="radio" id="NcarregaFinan" name="FinanEvento"
			                                                            value="nao" onclick="clickFinanceiroEvento()">
                                                      			</div>                                                   
                                                   </div> 
                                                   
                                                                        <div class="form-group row">
                                                                            <div class="form-group col-md-6" id="selecaorateio">
                                                                                <label>Carregar base rateio pré-configurado</label>
                                                                                <input name="rateioconfigurado" class="form-control" type="zoom" id="rateioconfigurado" data-zoom="{'displayKey':'DESCRICAO',
                                                            'datasetId':'VM_RateioConfigurado',
                                                            'maximumSelectionLength':'1',
                                                            'placeholder':'Selecione um rateio',
                                                            'fields':[
                                                            {
                                                            'field':'CODIGO',
                                                            'label':'CODIGO'
                                                            },                                                              
                                                            {
                                                            'field':'DESCRICAO',
                                                            'label':'DESCRICAO',
                                                            'standard':'true'
                                                            }						  					
                                                            ]
                                                            }">
                                                                            </div>
                                                                            <div class="col-md-6 fs-txt-right">
                                                                                <button type="button" class="btn btn-primary" id="btn_add_item" name="btn_add_item" onclick="adicionaLinha()">
                                                                                    <span class="fluigicon fluigicon-plus-sign fluigicon-sm"></span> Adicionar
                                                                                </button>
                                                                            </div>
                                                                        </div>
                                                                        <div class="form-group row">
                                                                            <div class="col-md-12">
                                                                                <div class="form-field table-responsive">
                                                                                    <table tablename="tableItens" id="tableItens" border="0" class="table table-striped table-bordered" noaddbutton="true" customFnDelete="fnCustomDeleteRateio(this)">
                                                                                        <thead>
                                                                                            <tr class="tableHeadRow">                                                                                                
                                                                                                <th>Percentual</th>
                                                                                                <th class="tableColumn">Centro de Custo</th>
                                                                                                <th class="tableColumn">Projeto</th>
                                                                                                <th class="tableColumn">Atividade</th>
                                                                                                <th class="tableColumn">Categoria</th>
                                                                                                <th class="tableColumn">Fonte de Financiamento</th>
                                                                                                <th class="tableColumn">Area Estratégica</th>
                                                                                                <th>Alocação</th>
                                                                                                <th>Localização</th>
                                                                                                <th>Conta Contábil</th>
                                                                                                <th>Rateio</th>
                                                                                            </tr>
                                                                                        </thead>
                                                                                        <tbody id="tbodyItens">
                                                                                            <tr>                                                                                               
                                                                                                <td>
                                                                                                    <input class="form-control money" name="percentual" id="percentual" type="number" style="width: 100px;" />
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="hidden" name="centrocusto" id="centrocusto" style="width: 200px;" />
                                                                                                        <input style="width: 200px !important;" type="zoom" name="txtcentrocusto" data-zoom="{
                                                                                    'displayKey':'CODIGO',
                                                                                    'datasetId':'VM_CentroCusto',
                                                                                    'maximumSelectionLength':'1',
                                                                                    'placeholder':'Selecione um centro de custo',
                                                                                    'fields':[
                                                                                    {'field':'CODIGO', 'label':'CODIGO', 'standard':'true'},
                                                                                    {'field':'DESCRICAO', 'label':'DESCRICAO'},
                                                                                    {'field':'TIPO', 'label':'TIPO' , 'visible' : 'false'}]
                                                                                    }" />
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="hidden" name="projeto" id="projeto" />
                                                                                                        <input type="zoom" name="txtprojeto" data-zoom="{
                                                                                    'displayKey':'CODIGO',
                                                                                    'datasetId':'VM_Projeto',
                                                                                    'maximumSelectionLength':'1',
                                                                                    'placeholder':'Selecione um projeto',
                                                                                    'fields':[
                                                                                    {'field':'CODIGO', 'label':'CODIGO', 'standard':'true'},
                                                                                    {'field':'DESCRICAO', 'label':'DESCRICAO'},
                                                                                    {'field':'CONTA', 'label':'CONTA' , 'visible' : 'false'}]
                                                                                    }" />
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="hidden" name="atividade" id="atividade" style="width: 200px;" />
                                                                                                        <input type="zoom" name="txtatividade" style="width: 200px;" data-zoom="{
                                                                                    'displayKey':'CODIGO',
                                                                                    'datasetId':'ds_get_Atividade',
                                                                                    'maximumSelectionLength':'1',
                                                                                    'placeholder':'Escolha uma atividade',
                                                                                    'fields':[
                                                                                    {'field':'CODIGO', 'label':'CODIGO'},
                                                                                    {'field':'DESCRICAO', 'label':'DESCRICAO', 'standard':'true'},                                                                                   
                                                                                    {'field':'CENTRO_CUSTO', 'label':'CENTRO_CUSTO', 'visible' : 'false'}]
                                                                                    }" />
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="hidden" name="categoria" id="categoria" />
                                                                                                        <input type="zoom" name="txtcategoria" data-zoom="{
                                                                                    'displayKey':'CODIGO',
                                                                                    'datasetId':'VM_Categoria',
                                                                                    'maximumSelectionLength':'1',
                                                                                    'placeholder':'Selecione uma despesa',
                                                                                    'fields':[
                                                                                    {'field':'CODIGO', 'label':'CODIGO', 'standard':'true'},
                                                                                    {'field':'DESCRICAO', 'label':'DESCRICAO'}]
                                                                                    }" />
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="hidden" name="fontefinanciamento" id="fontefinanciamento" />
                                                                                                        <input type="zoom" name="txtfontefinanciamento" data-zoom="{
                                                                                    'displayKey':'CODIGO',
                                                                                    'datasetId':'ds_get_FonteFinanciamento',
                                                                                    'maximumSelectionLength':'1',
                                                                                    'placeholder':'Selecione uma fonte de financ.',
                                                                                    'fields':[
                                                                                    {'field':'CODIGO', 'label':'CODIGO', 'standard':'true'},
                                                                                    {'field':'DESCRICAO', 'label':'DESCRICAO'},
                                                                                    {'field':'PROJETO', 'label':'PROJETO', 'visible':'false'}]
                                                                                    }" />
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <div class="form-group">
                                                                                                        <input type="hidden" name="areaestrategica" id="areaestrategica" />
                                                                                                        <input type="zoom" name="txtareaestrategica" data-zoom="{
                                                                                    'displayKey':'CODIGO',
                                                                                    'datasetId':'ds_get_AreaProjeto',
                                                                                    'maximumSelectionLength':'1',
                                                                                    'placeholder':'Selecione uma Area Estrategica',
                                                                                    'fields':[
                                                                                    {'field':'CODIGO', 'label':'CODIGO'},
                                                                                    {'field':'DESCRICAO', 'label':'DESCRICAO', 'standard':'true'}]
                                                                                    }" />
                                                                                                    </div>
                                                                                                </td>
                                                                                                <td>
                                                                                                    <input class="form-control" name="alocacao" id="alocacao" type="text" maxlength="5" style="width: 100px;" readOnly />
                                                                                                </td>
                                                                                                <td>
                                                                                                    <input class="form-control" name="localizacao" id="localizacao" type="text" maxlength="3" style="width: 70px;" readonly />
                                                                                                </td>
                                                                                                <td>
                                                                                                    <input class="form-control" name="contacontabil" id="contacontabil" type="text" maxlength="10" style="width: 120px;" readonly />
                                                                                                </td>
                                                                                                <td>
                                                                                                    <input class="form-control" name="rateio" id="rateio" type="text" maxlength="10" style="width: 100px;" readonly />
                                                                                                </td>
                                                                                            </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <!-- Linha 6 -->
                                                                <!-- Linha 7 -->
                                                                <ul class="list-inline pull-right">
                                                                    <li>
                                                                        <button type="button" class="btn btn-primary next-step">Avançar</button>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="tab-pane" role="tabpanel" id="step2">
                                                                <div class="panel-body">
                                                                    <div class="form-group row">
                                                                        <div class="col-md-12 fs-txt-right">
                                                                            <button type="button" class="btn btn-primary" id="btn_add_itemS" name="btn_add_itemS" onclick="adicionaLinhaProduto()">
                                                                                <span class="fluigicon fluigicon-plus-sign fluigicon-sm"></span> Adicionar produto
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                    <div class="form-group row">
                                                                        <div class="col-md-12">
                                                                            <div class="form-field table-responsive">
                                                                                <table tablename="tableCompras" id="tableCompras" border="0" class="table table-striped table-bordered" noaddbutton=true customFnDelete="fnCustomDeleteProduto(this)">
                                                                                    <thead>
                                                                                        <tr class="tableHeadRow">
                                                                                            
                                                                                            <th class="tableColumn">Descrição do Produto</th>
                                                                                            <th class="tableColumn">Unid. Medida</th>
                                                                                            <th class="tableColumn">Prazo fornecedor</th>
                                                                                            <th class="tableColumn">Qtd</th>
                                                                                            <th class="tableColumn">Valor da ultima compra</th>
                                                                                            <th class="tableColumn">Valor total</th>
                                                                                            <th class="tableColumn">Data de necessidade</th>
                                                                                            <th class="tableColumn" id="div_codProduto">Codigo Prod.</th>
                                                                                        </tr>
                                                                                    </thead>
                                                                                    <tbody id="tbodyCompras">
                                                                                        <tr>
                                                                                           
                                                                                            <td>
                                                                                                <div class="form-group">
                                                                                                    <input type="hidden" name="produto" id="produto" />
                                                                                                    <input type="zoom" name="txtproduto" data-zoom="{
                                                                                    'displayKey':'DESCRICAO',
                                                                                    'datasetId':'ds_get_Produtos',
                                                                                    'maximumSelectionLength':'1',
                                                                                    'placeholder':'Selecione um produto',
                                                                                    'fields':[
                                                                                    {'field':'CODIGO', 'label':'CODIGO'},
                                                                                    {'field':'DESCRICAO', 'label':'DESCRICAO', 'standard':'true' },                                                                                    
                                                                                    {'field':'PRAZO_FORNECEDOR', 'label':'PRAZO_FORNECEDOR'},
																					{'field':'UNIDADE_MEDIDA', 'label':'UNIDADE_MEDIDA','visible':'false'},                                                                                    
                                                                                    {'field':'ULTIMA_COMPRA', 'label':'ULTIMA_COMPRA','visible':'false'},
                                                                                    {'field':'ULTIMO_VALOR', 'label':'ULTIMO_VALOR','visible':'false'}]
                                                                                    }" />
                                                                                                </div>
                                                                                            </td>                                                                                            
                                                                                            <td>
                                                                                                <input class="form-control" name="idum" id="idum" type="text" style="width:100px;" readonly/>
                                                                                            </td>
<td>
                                                                                                <input class="form-control" name="prazoFornecedor" id="prazoFornecedor" type="number" style="width:100px;" readonly/>
                                                                                            </td>                                                                                            
                                                                                            <td>
                                                                                                <input class="form-control money" name="idquantidade" id="idquantidade" type="number" style="width:100px;" />
                                                                                            </td>
                                                                                            <td>
                                                                                                <input class="form-control money" name="vrUltima" id="vrUltima" type="number" style="width:200px;" readonly/>
                                                                                            </td>
                                                                                            <td>
                                                                                                <input class="form-control money" name="vrTotUnit" id="vrTotUnit" type="number" style="width:200px;" readonly/>
                                                                                            </td>
                                                                                            <td>
                                                                                                <div class="input-group date" style="width:150px;">
                                                                                                    <input type="text" class="form-control" id="dtNecessidade" name="dtNecessidade" mask="00/00/0000">
                                                                                                    <span class="input-group-addon">
                                                       		 										 <span class="fluigicon fluigicon-calendar"></span>
                                                                                                    </span>
                                                                                                </div>
                                                                                            </td>
                                                                                            <td>
                                                                                                <input class="form-control" name="codigoProduto" id="codigoProduto" type="text" maxlength="5" style="width: 150px;" readOnly />
                                                                                            </td>
                                                                                        </tr>
                                                                                    </tbody>
                                                                                </table>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>

                                                                <ul class="list-inline pull-right">
                                                                    <li>
                                                                        <button type="button" class="btn btn-default prev-step">Voltar</button>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="clearfix"></div>
                                                        </div>
                                                    </div>
                                                </section>
                                            </div>
                                        </div>
                                        <div class="tab-pane" id="2b">
                                            <div class="row">
                                                <div class="form-group col-md-4">
                                                    <label for="gestor" class="required">Nome aprovador</label>
                                                    <input type="text" class="form-control" id="gestor" name="gestor" readonly>
                                                </div>
                                                <div class="form-group col-md-4">
                                                    <label for="emailLider">Email do aprovador</label>
                                                    <input type="email" class="form-control" id="emailLider" name="emailLider" readonly>
                                                </div>
                                                <div class="form-group col-md-4" id="divMatricualApr">
                                                    <label for="matriculaApr">ID Aprovador</label>
                                                    <input type="text" class="form-control" id="matriculaApr" name="matriculaApr" readonly>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <h3>Para aprovar ou reprovar, marque a opção desejada:</h3>
                                                <div class="form-group col-md-2">
                                                    <Label for="aprovacao">Aprovado</Label>
                                                    <input type="radio" id="aprovacao" name="aprovacao" value="aprovado" />
                                                </div>
                                                <div class="form-group col-md-4">
                                                    <Label for="aprovacaon">Reprovado</Label>
                                                    <input type="radio" id="aprovacaon" name="aprovacao" value="reprovado" />
                                                </div>
                                                <div class="form-group col-md-4">
                                                    <Label for="devolver">Devolver para correção</Label>
                                                    <input type="radio" id="devolver" name="aprovacao" value="corrigir" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script src="SolicitacaoCompraProdutos.js"></script>
</body>

</html>